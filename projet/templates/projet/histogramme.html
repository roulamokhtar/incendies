{% extends 'projet/layout.html' %}
{% block content %} 
{% load static %}
<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
   <script src = "{% static 'projet/js/Chart.min.js' %}"></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script>

	<title>Histogramme</title>

	<canvas id ="chart" style = "width:50% height:50%"  ></canvas>
		<canvas id ="chart2" style = "width:50% height:50%"  ></canvas>

	<script>
	// {% for projet in queryset %}
 // 		console.log("{{ projet.name }}", "{{ projet.nombre_objectifglobal }}"   );
 //  	{% endfor %}
  	

 	  var endpoint = '{% url "projet_histogramme" %}'
  var defaultData = [];
  var labels = [];
   $.ajax({
      method: "GET",
       url: endpoint, 

      success: function(data){

         defaultData = data;
         
		var ctx = document.getElementById('chart').getContext('2d');
		var xlabs = [];
		
		var myChart = new Chart(ctx, {
		    type: 'bar',
		    data: {
		        labels:  [{% for i in queryset %}'{{ i.name}}' ,{% endfor %}],
		         //['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
// [{% for i in queryset %}{{ i.commune }},{% endfor %}],
		        datasets: [{
		            label: 'Nombre de projets ',
                         data:  [{% for i in queryset %}{{ i.nombre_objectifglobal }},{% endfor %}],
                         //[12, 19, 3, 5, 2, 3],//
		            backgroundColor: [
		                'rgba(255, 99, 132, 0.8)',
		                'rgba(54, 162, 235, 0.8)',
		                'rgba(255, 206, 86, 0.8)',
		                'rgba(75, 192, 192, 0.8)',
		                'rgba(153, 102, 255, 0.8)',
		                'rgba(255, 159, 64, 0.8)',
		                'rgba(255, 99, 132, 0.8)',
		                'rgba(54, 162, 235, 0.8)',
		                'rgba(255, 206, 86, 0.8)',
		                'rgba(75, 192, 192, 0.8)',
		                'rgba(153, 102, 255, 0.8)',
		                'rgba(255, 159, 64, 0.8)',
		                'rgba(255, 99, 132, 0.8)',
		                'rgba(54, 162, 235, 0.8)',
		                'rgba(255, 206, 86, 0.8)',
		                'rgba(75, 192, 192, 0.8)',
		                'rgba(153, 102, 255, 0.8)',
		                'rgba(255, 159, 64, 0.8)',
		                'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)'

		            ],
		            borderColor: [
		                 'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)',
		                'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)',
		                'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)',
		                'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)'
		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});
		///////////////////////////////
     {% for projet2 in queryset2   %}
  		console.log("{{ projet2.name }}", "{{ projet2.nombre }}"   );
   	{% endfor %}
		var ctx2 = document.getElementById('chart2').getContext('2d');
 		
		var myChart2 = new Chart(ctx2, {
		    type: 'pie',
		    data: {
		        labels:  [{% for i in queryset2 %}'{{ i.name}}' ,{% endfor %}],
		         //['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
// [{% for i in queryset %}{{ i.commune }},{% endfor %}],
		        datasets: [{
		            label: 'Nombre de projets ',
                         data:  [{% for i in queryset2 %}{{ i.nombre }},{% endfor %}],
                         //[12, 19, 3, 5, 2, 3],//
		            backgroundColor: [
		                'rgba(255, 99, 132, 0.8)',
		                'rgba(54, 162, 235, 0.8)',
		                 'rgba(255, 206, 86, 0.2)'


		            ],
		            borderColor: [
		                 'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)'
		                 
		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});
		//fin function succes
 		}
 	});
	 
	</script>
 
{% endblock %}


