{% extends 'incendies/layout.html' %}
{% block content %} 
{% load static %} 
   <script src = "{% static 'projet/js/Chart.min.js' %}"></script>
        <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js'></script>

	<title>Histogramme</title>

	<canvas id ="chart" style = "max-height:400px;max-width:1000px"  ></canvas>
		<canvas id ="chart2" style = "max-height:400px;max-width:1000px"  ></canvas>

 
	<script>
	// {% for projet in queryset %}
 // 		console.log("{{ projet.name }}", "{{ projet.nombre_objectifglobal }}"   );
 //  	{% endfor %}
  	

 	  var endpoint = '{% url "incendies_histogramme" %}'
  var defaultData = [];
  var labels = [];
   $.ajax({
      method: "GET",
       url: endpoint, 

      success: function(data){

         defaultData = data;
         
		var ctx = document.getElementById('chart').getContext('2d');
		var xlabs = [];
		
		var myChart = new Chart(ctx, {
		    type: 'bar',
		    data: {
		        labels:  [{% for i in queryset %}'{{ i.name}}' ,{% endfor %}],
		         //['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
// [{% for i in queryset %}{{ i.commune }},{% endfor %}],
		        datasets: [{
		            label: 'Nombre de foyer des incendies de la wilaya de {{user.username}}',
                         data:  [{% for i in queryset %}{{ i.dcount }},{% endfor %}],
                         //[12, 19, 3, 5, 2, 3],//
		            backgroundColor: [
 'rgba(255, 99, 132, 0.8)',
		                'rgba(54, 162, 235, 0.8)',
		                'rgba(255, 206, 86, 0.8)',
		                'rgba(75, 192, 192, 0.8)',
		                'rgba(153, 102, 255, 0.8)',
		                'rgba(255, 159, 64, 0.8)',
		                'rgba(255, 99, 132, 0.8)',
		                'rgba(54, 162, 235, 0.8)',
		                'rgba(255, 206, 86, 0.8)',
		                'rgba(75, 192, 192, 0.8)',
		                'rgba(153, 102, 255, 0.8)',
		                'rgba(255, 159, 64, 0.8)',
		                'rgba(255, 99, 132, 0.8)',
		                'rgba(54, 162, 235, 0.8)',
		                'rgba(255, 206, 86, 0.8)',
		                'rgba(75, 192, 192, 0.8)',
		                'rgba(153, 102, 255, 0.8)',
		                'rgba(255, 159, 64, 0.8)',
		                'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)'

		            ],
		            borderColor: [
 		                // 'rgba(255, 99, 132, 0.2)',
		                // 'rgba(54, 162, 235, 0.2)',
		                // 'rgba(255, 206, 86, 0.2)'

		                
		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});
 ///////////////////
 		var ctx2 = document.getElementById('chart2').getContext('2d');
 		
		var myChart = new Chart(ctx2, {
		    type: 'bar',
		    data: {
		        labels:  [{% for d in superficie_estime %}'{{ d.name}}' ,{% endfor %}],
		         //['Red', 'Blue', 'Yellow', 'Green', 'Purple', 'Orange'],
// [{% for i in queryset %}{{ i.commune }},{% endfor %}],
		        datasets: [{
		            label: 'Superficie des incendies ',
                         data:  [{% for d in superficie_estime %}{{ d.superficie }},{% endfor %}],
                         //[12, 19, 3, 5, 2, 3],//
		            backgroundColor: [
 'rgba(255, 99, 132, 0.8)',
		                'rgba(54, 162, 235, 0.8)',
		                'rgba(255, 206, 86, 0.8)',
		                'rgba(75, 192, 192, 0.8)',
		                'rgba(153, 102, 255, 0.8)',
		                'rgba(255, 159, 64, 0.8)',
		                'rgba(255, 99, 132, 0.8)',
		                'rgba(54, 162, 235, 0.8)',
		                'rgba(255, 206, 86, 0.8)',
		                'rgba(75, 192, 192, 0.8)',
		                'rgba(153, 102, 255, 0.8)',
		                'rgba(255, 159, 64, 0.8)',
		                'rgba(255, 99, 132, 0.8)',
		                'rgba(54, 162, 235, 0.8)',
		                'rgba(255, 206, 86, 0.8)',
		                'rgba(75, 192, 192, 0.8)',
		                'rgba(153, 102, 255, 0.8)',
		                'rgba(255, 159, 64, 0.8)',
		                'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)',
		                'rgba(255, 206, 86, 0.2)',
		                'rgba(75, 192, 192, 0.2)',
		                'rgba(153, 102, 255, 0.2)',
		                'rgba(255, 159, 64, 0.2)',

		            ],
		            borderColor: [
 		                'rgba(255, 99, 132, 0.2)',
		                'rgba(54, 162, 235, 0.2)',
		                'rgba(255, 206, 86, 0.2)'

		                
		            ],
		            borderWidth: 1
		        }]
		    },
		    options: {
		        scales: {
		            yAxes: [{
		                ticks: {
		                    beginAtZero: true
		                }
		            }]
		        }
		    }
		});
 ////////////////////
 		}
 	});
	 
	</script>
 
{% endblock %}